{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";import mockData from\"../Data/mockData.json\";import LoadingSpinner from\"../Assets/loading-spinner.gif\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function BoxFolderSelector(_ref){let{URLFolder,setURLFolder,setFoundPDFs,setFolderPath,setTypeArray,authCode,refresh}=_ref;const defaultHelperText=\"Paste Box link here (e.g. https://eoslightmedia.app.box.com/folder/240776517305)\";const[helperText,setHelperText]=useState(defaultHelperText);const loadingMessage=\"Fetching folder data...\";const fetchFolderData=async folderNumber=>{setHelperText(loadingMessage);// Common function to process the response and set helper text\nconst processResponse=(items,path)=>{const pdfs=items.filter(item=>item.type===\"pdf\");const pdfNames=pdfs.map(pdf=>pdf.name);setTypeArray(pdfNames);setFoundPDFs(pdfs);setFolderPath(path);// Find PDFs that don't have an underscore and are longer than 15 characters\nconst problematicPDFs=pdfs.filter(pdf=>!pdf.name.includes(\"_\")&&pdf.name.length-4>15);// Construct the helper text with potential issues\nconst issueText=problematicPDFs.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{className:\"issue-alert\",children:\"\\u26A0\\uFE0F Possible file naming issues found:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"issue-list\",children:problematicPDFs.map(pdf=>/*#__PURE__*/_jsx(\"li\",{children:pdf.name},pdf.name))}),/*#__PURE__*/_jsx(\"p\",{className:\"info-helper-text\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[\" \",\"\\u2139\\uFE0F \\\"Type\\\" is determined by the text before the first underscore \\\"_\\\" in the file name and should not exceed 15 characters.\"]})})]}):null;setHelperText(/*#__PURE__*/_jsxs(\"div\",{className:\"helper-text-block\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"success-helper-p\",children:[\"\\u2705 Box folder found containing \",/*#__PURE__*/_jsx(\"strong\",{children:pdfs.length}),\" PDFs!\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDCC1 \",/*#__PURE__*/_jsx(\"strong\",{children:path}),\" \"]}),issueText]}));};if(process.env.NODE_ENV===\"development\"){setTimeout(()=>{processResponse(mockData.items,mockData.path);},1000);}else{try{const response=await axios.get(\"/api/folder/?folder_id=\".concat(folderNumber,\"&access=\").concat(authCode,\"&refresh=\").concat(refresh));processResponse(response.data.items,response.data.path);}catch(error){setHelperText(\"‚ùå Error fetching folder data. You might not have permission or the folder doesn't exist.\");console.error(\"‚ùå Error fetching folder data:\",error);}}};const validateFolderLink=inputUrl=>{setURLFolder(inputUrl);setHelperText(\"‚ùå Fetching folder data...\");if(inputUrl===\"\"){setHelperText(defaultHelperText);return;}const regex=/^(https?:\\/\\/)?eoslightmedia.app.box.com\\/folder\\/(\\d+)$/;const match=inputUrl.match(regex);if(match&&match[2]){fetchFolderData(match[2]);}else{setHelperText(\"Hmmm, something about that link doesn‚Äôt look right...\");}};const handleChange=event=>{const inputUrl=event.target.value;validateFolderLink(inputUrl);};return/*#__PURE__*/_jsxs(\"div\",{className:\"box-folder-selector-container\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"box-folder-url\",className:\"input-label\",children:\"Box Folder Link:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"box-folder-url\",className:\"text-input\",value:URLFolder,onChange:handleChange,placeholder:\"https://eoslightmedia.app.box.com/folder/240776517305\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"box-helper-text\",children:[helperText===loadingMessage&&/*#__PURE__*/_jsx(\"img\",{src:LoadingSpinner,className:\"loading-spinner-small\",alt:\"Loading\",style:{width:\"15px\",marginRight:\"5px\",marginTop:\"-1px\"}}),helperText]})]});}export default BoxFolderSelector;","map":{"version":3,"names":["React","useState","axios","mockData","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BoxFolderSelector","_ref","URLFolder","setURLFolder","setFoundPDFs","setFolderPath","setTypeArray","authCode","refresh","defaultHelperText","helperText","setHelperText","loadingMessage","fetchFolderData","folderNumber","processResponse","items","path","pdfs","filter","item","type","pdfNames","map","pdf","name","problematicPDFs","includes","length","issueText","children","className","process","env","NODE_ENV","setTimeout","response","get","concat","data","error","console","validateFolderLink","inputUrl","regex","match","handleChange","event","target","value","htmlFor","id","onChange","placeholder","src","alt","style","width","marginRight","marginTop"],"sources":["/Users/stevengraves/EosDev/EosApps/cutsheet_stamp_tool/frontend-dev/src/Components/BoxFolderSelector.js"],"sourcesContent":["import React, { useState } from \"react\"\nimport axios from \"axios\"\nimport mockData from \"../Data/mockData.json\"\nimport LoadingSpinner from \"../Assets/loading-spinner.gif\"\n\nfunction BoxFolderSelector({\n  URLFolder,\n  setURLFolder,\n  setFoundPDFs,\n  setFolderPath,\n  setTypeArray,\n  authCode,\n  refresh,\n}) {\n  const defaultHelperText =\n    \"Paste Box link here (e.g. https://eoslightmedia.app.box.com/folder/240776517305)\"\n  const [helperText, setHelperText] = useState(defaultHelperText)\n  const loadingMessage = \"Fetching folder data...\"\n\n  const fetchFolderData = async (folderNumber) => {\n    setHelperText(loadingMessage)\n\n    // Common function to process the response and set helper text\n    const processResponse = (items, path) => {\n      const pdfs = items.filter((item) => item.type === \"pdf\")\n      const pdfNames = pdfs.map((pdf) => pdf.name)\n      setTypeArray(pdfNames)\n      setFoundPDFs(pdfs)\n      setFolderPath(path)\n\n      // Find PDFs that don't have an underscore and are longer than 15 characters\n      const problematicPDFs = pdfs.filter(\n        (pdf) => !pdf.name.includes(\"_\") && pdf.name.length - 4 > 15\n      )\n\n      // Construct the helper text with potential issues\n      const issueText =\n        problematicPDFs.length > 0 ? (\n          <>\n            <br />\n            <p className=\"issue-alert\">‚ö†Ô∏è Possible file naming issues found:</p>\n            <ul className=\"issue-list\">\n              {problematicPDFs.map((pdf) => (\n                <li key={pdf.name}>{pdf.name}</li>\n              ))}\n            </ul>\n            <p className=\"info-helper-text\">\n              <strong>\n                {\" \"}\n                ‚ÑπÔ∏è \"Type\" is determined by the text before the first underscore\n                \"_\" in the file name and should not exceed 15 characters.\n              </strong>\n            </p>\n          </>\n        ) : null\n\n      setHelperText(\n        <div className=\"helper-text-block\">\n          <p className=\"success-helper-p\">\n            ‚úÖ Box folder found containing <strong>{pdfs.length}</strong> PDFs!\n          </p>\n          <p>\n            üìÅ <strong>{path}</strong>{\" \"}\n          </p>\n          {issueText}\n        </div>\n      )\n    }\n\n    if (process.env.NODE_ENV === \"development\") {\n      setTimeout(() => {\n        processResponse(mockData.items, mockData.path)\n      }, 1000)\n    } else {\n      try {\n        const response = await axios.get(\n          `/api/folder/?folder_id=${folderNumber}&access=${authCode}&refresh=${refresh}`\n        )\n        processResponse(response.data.items, response.data.path)\n      } catch (error) {\n        setHelperText(\n          \"‚ùå Error fetching folder data. You might not have permission or the folder doesn't exist.\"\n        )\n        console.error(\"‚ùå Error fetching folder data:\", error)\n      }\n    }\n  }\n\n  const validateFolderLink = (inputUrl) => {\n    setURLFolder(inputUrl)\n    setHelperText(\"‚ùå Fetching folder data...\")\n\n    if (inputUrl === \"\") {\n      setHelperText(defaultHelperText)\n      return\n    }\n\n    const regex = /^(https?:\\/\\/)?eoslightmedia.app.box.com\\/folder\\/(\\d+)$/\n    const match = inputUrl.match(regex)\n\n    if (match && match[2]) {\n      fetchFolderData(match[2])\n    } else {\n      setHelperText(\"Hmmm, something about that link doesn‚Äôt look right...\")\n    }\n  }\n\n  const handleChange = (event) => {\n    const inputUrl = event.target.value\n    validateFolderLink(inputUrl)\n  }\n\n  return (\n    <div className=\"box-folder-selector-container\">\n      <label htmlFor=\"box-folder-url\" className=\"input-label\">\n        Box Folder Link:\n      </label>\n      <input\n        type=\"text\"\n        id=\"box-folder-url\"\n        className=\"text-input\"\n        value={URLFolder}\n        onChange={handleChange}\n        placeholder=\"https://eoslightmedia.app.box.com/folder/240776517305\"\n      />\n      <div className=\"box-helper-text\">\n        {helperText === loadingMessage && (\n          <img\n            src={LoadingSpinner}\n            className=\"loading-spinner-small\"\n            alt=\"Loading\"\n            style={{ width: \"15px\", marginRight: \"5px\", marginTop: \"-1px\" }}\n          />\n        )}\n        {helperText}\n      </div>\n    </div>\n  )\n}\n\nexport default BoxFolderSelector\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}