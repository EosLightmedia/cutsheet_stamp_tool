{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import StampForm from\"./StampForm\";import StampPreview from\"./StampPreview\";import StampSubmit from\"./StampSubmit\";import ProcessingPage from\"./ProcessingPage\";import Banner from\"./Banner\";import Footer from\"./Footer\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function MainController(){const[preparedBy,setPreparedBy]=useState(\"Eos Lightmedia\");const[jobName,setJobName]=useState(\"\");const[jobCode,setJobCode]=useState(\"\");const[URLFolder,setURLFolder]=useState(\"\");const[preparedFor,setPreparedFor]=useState(\"\");const[date,setDate]=useState(\"\");const[isRevision,setIsRevision]=useState(false);const[jobPhase,setJobPhase]=useState(\"\");const[note,setNote]=useState(\"\");const[gradientStyle,setGradientStyle]=useState(\"No Gradient\");const[revisionNumber,setRevisionNumber]=useState(0);const[showPageNumbers,setShowPageNumbers]=useState(false);const[isPackagePDFs,setIsPackagePDFs]=useState(false);const[disclaimer,setDisclaimer]=useState([false,false,false]);const[createdFolderNumber,setCreatedFolderNumber]=useState();const[foundPDFs,setFoundPDFs]=useState([]);const[isProcessing,setIsProcessing]=useState(false);const[bannerIsVisible,setBannerIsVisible]=useState(false);const[canSubmit,setCanSubmit]=useState(false);useEffect(()=>{const urlRegex=/^(https?:\\/\\/)?([\\da-z.-]+)\\.([a-z.]{2,6})([/\\w .-]*)*\\/?$/;const isValidLink=urlRegex.test(URLFolder);const areRequiredFieldsFilled=jobName&&jobCode&&preparedFor&&jobPhase&&isValidLink;setCanSubmit(areRequiredFieldsFilled);},[jobName,jobCode,preparedFor,jobPhase,URLFolder]);const handleSubmit=()=>{setIsProcessing(true);function extractFolderNumber(url){const regex=/https:\\/\\/eoslightmedia\\.app\\.box\\.com\\/folder\\/(\\d+)/;const match=url.match(regex);return match?match[1]:null;}const folderNumber=extractFolderNumber(URLFolder);let preparedByNumber;if(preparedBy===\"Eos Lightmedia\"){preparedByNumber=0;}else if(preparedBy===\"Abernathy Lighting Design\"){preparedByNumber=1;}let gradientNumber;switch(gradientStyle){case\"No Gradient\":gradientNumber=0;break;case\"Purple/Blue\":gradientNumber=1;break;case\"Orange\":gradientNumber=2;break;default:gradientNumber=0;}const formData={folderID:folderNumber,projectName:jobName,projectNumber:jobCode,preparedBy:preparedByNumber,preparedFor:preparedFor,date:date,note:note,isRevision:isRevision,revisionNumber:revisionNumber,gradient:gradientNumber,disclaimer:disclaimer,packageSet:isPackagePDFs};axios.post(\"/api/stamp\",formData).then(response=>{console.log(\"Newly Created Folder:\",response.data);setCreatedFolderNumber(response.data);setIsProcessing(false);setBannerIsVisible(true);}).catch(error=>{console.error(\"There was an error submitting the form:\",error);setIsProcessing(false);setBannerIsVisible(true);});};return/*#__PURE__*/_jsxs(_Fragment,{children:[isProcessing&&/*#__PURE__*/_jsx(ProcessingPage,{setIsProcessing:setIsProcessing}),bannerIsVisible&&/*#__PURE__*/_jsx(Banner,{createdFolderNumber:createdFolderNumber,setBannerIsVisible:setBannerIsVisible}),/*#__PURE__*/_jsxs(\"div\",{className:\"all-app-content\",children:[/*#__PURE__*/_jsx(StampForm,{jobName:jobName,setJobName:setJobName,jobCode:jobCode,setJobCode:setJobCode,note:note,setNote:setNote,URLFolder:URLFolder,setURLFolder:setURLFolder,preparedFor:preparedFor,setPreparedFor:setPreparedFor,preparedBy:preparedBy,setPreparedBy:setPreparedBy,date:date,setDate:setDate,isRevision:isRevision,setIsRevision:setIsRevision,jobPhase:jobPhase,setJobPhase:setJobPhase,gradientStyle:gradientStyle,setGradientStyle:setGradientStyle,revisionNumber:revisionNumber,setRevisionNumber:setRevisionNumber,isPackagePDFs:isPackagePDFs,setIsPackagePDFs:setIsPackagePDFs,showPageNumbers:showPageNumbers,setShowPageNumbers:setShowPageNumbers,disclaimer:disclaimer,setDisclaimer:setDisclaimer,foundPDFs:foundPDFs,setFoundPDFs:setFoundPDFs}),/*#__PURE__*/_jsx(StampPreview,{jobName:jobName,jobCode:jobCode,URLFolder:URLFolder,setURLFolder:setURLFolder,preparedFor:preparedFor,preparedBy:preparedBy,date:date,isRevision:isRevision,jobPhase:note,gradientStyle:gradientStyle,revisionNumber:revisionNumber,disclaimer:disclaimer,showPageNumbers:showPageNumbers}),/*#__PURE__*/_jsx(StampSubmit,{onClick:handleSubmit,isActive:true}),/*#__PURE__*/_jsx(Footer,{})]})]});}export default MainController;","map":{"version":3,"names":["React","useEffect","useState","StampForm","StampPreview","StampSubmit","ProcessingPage","Banner","Footer","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MainController","preparedBy","setPreparedBy","jobName","setJobName","jobCode","setJobCode","URLFolder","setURLFolder","preparedFor","setPreparedFor","date","setDate","isRevision","setIsRevision","jobPhase","setJobPhase","note","setNote","gradientStyle","setGradientStyle","revisionNumber","setRevisionNumber","showPageNumbers","setShowPageNumbers","isPackagePDFs","setIsPackagePDFs","disclaimer","setDisclaimer","createdFolderNumber","setCreatedFolderNumber","foundPDFs","setFoundPDFs","isProcessing","setIsProcessing","bannerIsVisible","setBannerIsVisible","canSubmit","setCanSubmit","urlRegex","isValidLink","test","areRequiredFieldsFilled","handleSubmit","extractFolderNumber","url","regex","match","folderNumber","preparedByNumber","gradientNumber","formData","folderID","projectName","projectNumber","gradient","packageSet","post","then","response","console","log","data","catch","error","children","className","onClick","isActive"],"sources":["/Users/stevengraves/EosDev/EosApps/cutsheet_stamp_tool/frontend-dev/src/Components/MainController.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\"\nimport StampForm from \"./StampForm\"\nimport StampPreview from \"./StampPreview\"\nimport StampSubmit from \"./StampSubmit\"\nimport ProcessingPage from \"./ProcessingPage\"\nimport Banner from \"./Banner\"\nimport Footer from \"./Footer\"\nimport axios from \"axios\"\n\nfunction MainController() {\n  const [preparedBy, setPreparedBy] = useState(\"Eos Lightmedia\")\n  const [jobName, setJobName] = useState(\"\")\n  const [jobCode, setJobCode] = useState(\"\")\n  const [URLFolder, setURLFolder] = useState(\"\")\n  const [preparedFor, setPreparedFor] = useState(\"\")\n  const [date, setDate] = useState(\"\")\n  const [isRevision, setIsRevision] = useState(false)\n  const [jobPhase, setJobPhase] = useState(\"\")\n  const [note, setNote] = useState(\"\")\n  const [gradientStyle, setGradientStyle] = useState(\"No Gradient\")\n  const [revisionNumber, setRevisionNumber] = useState(0)\n  const [showPageNumbers, setShowPageNumbers] = useState(false)\n  const [isPackagePDFs, setIsPackagePDFs] = useState(false)\n  const [disclaimer, setDisclaimer] = useState([false, false, false])\n  const [createdFolderNumber, setCreatedFolderNumber] = useState()\n  const [foundPDFs, setFoundPDFs] = useState([])\n  const [isProcessing, setIsProcessing] = useState(false)\n  const [bannerIsVisible, setBannerIsVisible] = useState(false)\n  const [canSubmit, setCanSubmit] = useState(false)\n\n  useEffect(() => {\n    const urlRegex =\n      /^(https?:\\/\\/)?([\\da-z.-]+)\\.([a-z.]{2,6})([/\\w .-]*)*\\/?$/\n    const isValidLink = urlRegex.test(URLFolder)\n    const areRequiredFieldsFilled =\n      jobName && jobCode && preparedFor && jobPhase && isValidLink\n    setCanSubmit(areRequiredFieldsFilled)\n  }, [jobName, jobCode, preparedFor, jobPhase, URLFolder])\n\n  const handleSubmit = () => {\n    setIsProcessing(true)\n    function extractFolderNumber(url) {\n      const regex = /https:\\/\\/eoslightmedia\\.app\\.box\\.com\\/folder\\/(\\d+)/\n      const match = url.match(regex)\n      return match ? match[1] : null\n    }\n\n    const folderNumber = extractFolderNumber(URLFolder)\n\n    let preparedByNumber\n    if (preparedBy === \"Eos Lightmedia\") {\n      preparedByNumber = 0\n    } else if (preparedBy === \"Abernathy Lighting Design\") {\n      preparedByNumber = 1\n    }\n\n    let gradientNumber\n    switch (gradientStyle) {\n      case \"No Gradient\":\n        gradientNumber = 0\n        break\n      case \"Purple/Blue\":\n        gradientNumber = 1\n        break\n      case \"Orange\":\n        gradientNumber = 2\n        break\n      default:\n        gradientNumber = 0\n    }\n\n    const formData = {\n      folderID: folderNumber,\n      projectName: jobName,\n      projectNumber: jobCode,\n      preparedBy: preparedByNumber,\n      preparedFor: preparedFor,\n      date: date,\n      note: note,\n      isRevision: isRevision,\n      revisionNumber: revisionNumber,\n      gradient: gradientNumber,\n      disclaimer: disclaimer,\n      packageSet: isPackagePDFs,\n    }\n\n    axios\n      .post(\"/api/stamp\", formData)\n      .then((response) => {\n        console.log(\"Newly Created Folder:\", response.data)\n        setCreatedFolderNumber(response.data)\n        setIsProcessing(false)\n        setBannerIsVisible(true)\n      })\n      .catch((error) => {\n        console.error(\"There was an error submitting the form:\", error)\n        setIsProcessing(false)\n        setBannerIsVisible(true)\n      })\n  }\n\n  return (\n    <>\n      {isProcessing && <ProcessingPage setIsProcessing={setIsProcessing} />}\n      {bannerIsVisible && (\n        <Banner\n          createdFolderNumber={createdFolderNumber}\n          setBannerIsVisible={setBannerIsVisible}\n        />\n      )}\n      <div className=\"all-app-content\">\n        <StampForm\n          jobName={jobName}\n          setJobName={setJobName}\n          jobCode={jobCode}\n          setJobCode={setJobCode}\n          note={note}\n          setNote={setNote}\n          URLFolder={URLFolder}\n          setURLFolder={setURLFolder}\n          preparedFor={preparedFor}\n          setPreparedFor={setPreparedFor}\n          preparedBy={preparedBy}\n          setPreparedBy={setPreparedBy}\n          date={date}\n          setDate={setDate}\n          isRevision={isRevision}\n          setIsRevision={setIsRevision}\n          jobPhase={jobPhase}\n          setJobPhase={setJobPhase}\n          gradientStyle={gradientStyle}\n          setGradientStyle={setGradientStyle}\n          revisionNumber={revisionNumber}\n          setRevisionNumber={setRevisionNumber}\n          isPackagePDFs={isPackagePDFs}\n          setIsPackagePDFs={setIsPackagePDFs}\n          showPageNumbers={showPageNumbers}\n          setShowPageNumbers={setShowPageNumbers}\n          disclaimer={disclaimer}\n          setDisclaimer={setDisclaimer}\n          foundPDFs={foundPDFs}\n          setFoundPDFs={setFoundPDFs}\n        />\n        <StampPreview\n          jobName={jobName}\n          jobCode={jobCode}\n          URLFolder={URLFolder}\n          setURLFolder={setURLFolder}\n          preparedFor={preparedFor}\n          preparedBy={preparedBy}\n          date={date}\n          isRevision={isRevision}\n          jobPhase={note}\n          gradientStyle={gradientStyle}\n          revisionNumber={revisionNumber}\n          disclaimer={disclaimer}\n          showPageNumbers={showPageNumbers}\n        />\n        <StampSubmit onClick={handleSubmit} isActive={true} />\n\n        <Footer />\n      </div>\n    </>\n  )\n}\n\nexport default MainController\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}